{"ast":null,"code":"var _jsxFileName = \"/Users/joaquinbecerra/Desktop/Proyecto Integrador Prog. III/proyectoreact/src/screens/Resultados/Resultados.js\";\nimport React, { Component } from 'react';\nimport CardPelicula from '../../components/CardPelicula/CardPelicula';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass Resultados extends Component {\n  constructor(props) {\n    super(props);\n    this.obtenerDatos = () => {\n      const apiKey = '7f7f8af8dc7e7a53c53410d1521c094f';\n      const tipo = this.props.match.params.tipo;\n      const input = this.props.match.params.query;\n\n      // El 'endpoint' de la API de búsqueda\n      const url = `https://api.themoviedb.org/3/search/${tipo}?language=en-US&page=1&query=${input}&api_key=${apiKey}`;\n      fetch(url).then(response => response.json()).then(data => {\n        this.setState({\n          datos: data.results,\n          loading: false\n        });\n      }).catch(error => {\n        console.log('El error fue: ' + error);\n        this.setState({\n          loading: false\n        });\n      });\n    };\n    this.state = {\n      datos: [],\n      loading: true\n    };\n  }\n  componentDidMount() {\n    this.obtenerDatos();\n  }\n  componentDidUpdate(prevProps) {\n    // Si la URL cambia, volvemos a obtener los datos\n    if (this.props.match.params.query !== prevProps.match.params.query) {\n      this.obtenerDatos();\n    }\n  }\n  render() {\n    const {\n      datos,\n      loading\n    } = this.state;\n    const tipo = this.props.match.params.tipo;\n    if (loading) {\n      return /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Cargando...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 14\n      }, this);\n    }\n    if (datos.length === 0) {\n      return /*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-center my-5\",\n        children: \"No se encontraron resultados.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 14\n      }, this);\n    }\n    return /*#__PURE__*/_jsxDEV(React.Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"alert alert-info\",\n        children: \"Resultados de la b\\xFAsqueda\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"row cards\",\n        children: datos.map(item => /*#__PURE__*/_jsxDEV(CardPelicula, {\n          id: item.id,\n          titulo: item.title || item.name,\n          imagen: item.poster_path,\n          descripcion: item.overview,\n          tipo: tipo === 'movie' ? 'movie' : 'serie' // Aseguramos el tipo para la ruta de detalle\n        }, item.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this);\n  }\n}\nexport default Resultados;","map":{"version":3,"names":["React","Component","CardPelicula","jsxDEV","_jsxDEV","Resultados","constructor","props","obtenerDatos","apiKey","tipo","match","params","input","query","url","fetch","then","response","json","data","setState","datos","results","loading","catch","error","console","log","state","componentDidMount","componentDidUpdate","prevProps","render","children","fileName","_jsxFileName","lineNumber","columnNumber","length","className","Fragment","map","item","id","titulo","title","name","imagen","poster_path","descripcion","overview"],"sources":["/Users/joaquinbecerra/Desktop/Proyecto Integrador Prog. III/proyectoreact/src/screens/Resultados/Resultados.js"],"sourcesContent":["import React, { Component } from 'react';\nimport CardPelicula from '../../components/CardPelicula/CardPelicula';\n\nclass Resultados extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      datos: [],\n      loading: true,\n    };\n  }\n\n  componentDidMount() {\n    this.obtenerDatos();\n  }\n\n  componentDidUpdate(prevProps) {\n    // Si la URL cambia, volvemos a obtener los datos\n    if (this.props.match.params.query !== prevProps.match.params.query) {\n      this.obtenerDatos();\n    }\n  }\n\n  obtenerDatos = () => {\n    const apiKey = '7f7f8af8dc7e7a53c53410d1521c094f';\n    const tipo = this.props.match.params.tipo;\n    const input = this.props.match.params.query;\n    \n    // El 'endpoint' de la API de búsqueda\n    const url = `https://api.themoviedb.org/3/search/${tipo}?language=en-US&page=1&query=${input}&api_key=${apiKey}`;\n\n    fetch(url)\n      .then(response => response.json())\n      .then(data => {\n        this.setState({\n          datos: data.results,\n          loading: false,\n        });\n      })\n      .catch(error => {\n        console.log('El error fue: ' + error);\n        this.setState({ loading: false });\n      });\n  };\n\n  render() {\n    const { datos, loading } = this.state;\n    const tipo = this.props.match.params.tipo;\n\n    if (loading) {\n      return <h2>Cargando...</h2>;\n    }\n\n    if (datos.length === 0) {\n      return <h2 className=\"text-center my-5\">No se encontraron resultados.</h2>;\n    }\n\n    return (\n      <React.Fragment>\n        <h2 className=\"alert alert-info\">Resultados de la búsqueda</h2>\n        <section className=\"row cards\">\n          {datos.map(item => (\n            <CardPelicula\n              key={item.id}\n              id={item.id}\n              titulo={item.title || item.name}\n              imagen={item.poster_path}\n              descripcion={item.overview}\n              tipo={tipo === 'movie' ? 'movie' : 'serie'} // Aseguramos el tipo para la ruta de detalle\n            />\n          ))}\n        </section>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default Resultados;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}