{"ast":null,"code":"var _jsxFileName = \"/Users/joaquinbecerra/Desktop/Proyecto Integrador Prog. III/proyectoreact/src/screens/Movies/Movies.js\";\nimport React, { Component } from 'react';\nimport CardPelicula from '../../components/CardPelicula/CardPelicula';\nimport { Link } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nclass Movies extends Component {\n  constructor(props) {\n    super(props);\n    this.obtenerPeliculas = () => {\n      const apiKey = '7f7f8af8dc7e7a53c53410d1521c094f';\n      const categoria = new URLSearchParams(this.props.location.search).get(\"category\");\n      let url = '';\n      if (categoria === 'popular') {\n        url = `https://api.themoviedb.org/3/movie/popular?api_key=${apiKey}&page=${this.state.pagina}`;\n        this.setState({\n          titulo: 'Películas populares'\n        });\n      } else if (categoria === 'now_playing') {\n        url = `https://api.themoviedb.org/3/movie/now_playing?api_key=${apiKey}&page=${this.state.pagina}`;\n        this.setState({\n          titulo: 'Películas en cartelera'\n        });\n      } else {\n        url = `https://api.themoviedb.org/3/movie/popular?api_key=${apiKey}&page=${this.state.pagina}`;\n        this.setState({\n          titulo: 'Todas las películas'\n        });\n      }\n      fetch(url).then(res => res.json()).then(data => {\n        this.setState(prevState => ({\n          peliculas: prevState.peliculas.concat(data.results),\n          peliculasOriginales: prevState.peliculasOriginales.concat(data.results),\n          cargando: false,\n          pagina: prevState.pagina + 1\n        }));\n      }).catch(err => console.log('Error al obtener películas:', err));\n    };\n    this.manejarCambios = e => {\n      const filtro = e.target.value;\n      const peliculasFiltradas = this.state.peliculasOriginales.filter(pelicula => pelicula.title.toLowerCase().includes(filtro.toLowerCase()));\n      this.setState({\n        peliculas: peliculasFiltradas,\n        filtroPeliculas: filtro\n      });\n    };\n    this.state = {\n      peliculas: [],\n      peliculasOriginales: [],\n      // Estado para guardar la lista completa\n      pagina: 1,\n      cargando: true,\n      titulo: 'Todas las películas',\n      filtroPeliculas: ''\n    };\n  }\n  componentDidMount() {\n    this.obtenerPeliculas();\n  }\n  render() {\n    const {\n      peliculas,\n      cargando,\n      titulo,\n      filtroPeliculas\n    } = this.state;\n    if (cargando) {\n      return /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Cargando...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 14\n      }, this);\n    }\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"alert alert-primary\",\n        children: titulo\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"filter-form px-0 mb-3\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"filter\",\n          placeholder: \"Buscar dentro de la lista\",\n          value: filtroPeliculas,\n          onChange: this.manejarCambios\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"row cards all-movies\",\n        children: peliculas.length > 0 ? peliculas.map(pelicula => /*#__PURE__*/_jsxDEV(CardPelicula, {\n          id: pelicula.id,\n          titulo: pelicula.title,\n          imagen: pelicula.poster_path,\n          descripcion: pelicula.overview,\n          tipo: \"movie\"\n        }, pelicula.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 15\n        }, this)) : /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"No se encontraron pel\\xEDculas que coincidan.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: this.obtenerPeliculas,\n        className: \"btn btn-info\",\n        children: \"Cargar m\\xE1s\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  }\n}\nexport default Movies;","map":{"version":3,"names":["React","Component","CardPelicula","Link","jsxDEV","_jsxDEV","Fragment","_Fragment","Movies","constructor","props","obtenerPeliculas","apiKey","categoria","URLSearchParams","location","search","get","url","state","pagina","setState","titulo","fetch","then","res","json","data","prevState","peliculas","concat","results","peliculasOriginales","cargando","catch","err","console","log","manejarCambios","e","filtro","target","value","peliculasFiltradas","filter","pelicula","title","toLowerCase","includes","filtroPeliculas","componentDidMount","render","children","fileName","_jsxFileName","lineNumber","columnNumber","className","type","name","placeholder","onChange","length","map","id","imagen","poster_path","descripcion","overview","tipo","onClick"],"sources":["/Users/joaquinbecerra/Desktop/Proyecto Integrador Prog. III/proyectoreact/src/screens/Movies/Movies.js"],"sourcesContent":["import React, { Component } from 'react';\nimport CardPelicula from '../../components/CardPelicula/CardPelicula';\nimport { Link } from 'react-router-dom';\n\nclass Movies extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      peliculas: [],\n      peliculasOriginales: [], // Estado para guardar la lista completa\n      pagina: 1,\n      cargando: true,\n      titulo: 'Todas las películas',\n      filtroPeliculas: '',\n    };\n  }\n\n  componentDidMount() {\n    this.obtenerPeliculas();\n  }\n\n  obtenerPeliculas = () => {\n    const apiKey = '7f7f8af8dc7e7a53c53410d1521c094f'; \n    const categoria = new URLSearchParams(this.props.location.search).get(\"category\");\n    let url = '';\n    \n    if (categoria === 'popular') {\n        url = `https://api.themoviedb.org/3/movie/popular?api_key=${apiKey}&page=${this.state.pagina}`;\n        this.setState({ titulo: 'Películas populares' });\n    } else if (categoria === 'now_playing') {\n        url = `https://api.themoviedb.org/3/movie/now_playing?api_key=${apiKey}&page=${this.state.pagina}`;\n        this.setState({ titulo: 'Películas en cartelera' });\n    } else {\n        url = `https://api.themoviedb.org/3/movie/popular?api_key=${apiKey}&page=${this.state.pagina}`;\n        this.setState({ titulo: 'Todas las películas' });\n    }\n\n    fetch(url)\n      .then(res => res.json())\n      .then(data => {\n        this.setState(prevState => ({\n          peliculas: prevState.peliculas.concat(data.results),\n          peliculasOriginales: prevState.peliculasOriginales.concat(data.results),\n          cargando: false,\n          pagina: prevState.pagina + 1,\n        }));\n      })\n      .catch(err => console.log('Error al obtener películas:', err));\n  };\n  \n  manejarCambios = (e) => {\n    const filtro = e.target.value;\n    const peliculasFiltradas = this.state.peliculasOriginales.filter(pelicula =>\n        pelicula.title.toLowerCase().includes(filtro.toLowerCase())\n    );\n    \n    this.setState({ \n      peliculas: peliculasFiltradas,\n      filtroPeliculas: filtro,\n    });\n  };\n\n  render() {\n    const { peliculas, cargando, titulo, filtroPeliculas } = this.state;\n\n    if (cargando) {\n      return <h2>Cargando...</h2>;\n    }\n    \n    return (\n      <>\n        <h2 className=\"alert alert-primary\">{titulo}</h2>\n        <form className=\"filter-form px-0 mb-3\">\n          <input \n            type=\"text\" \n            name=\"filter\" \n            placeholder=\"Buscar dentro de la lista\" \n            value={filtroPeliculas}\n            onChange={this.manejarCambios}\n          />\n        </form>\n        \n\n        <section className=\"row cards all-movies\">\n          {peliculas.length > 0 ? (\n            peliculas.map(pelicula => (\n              <CardPelicula\n                key={pelicula.id}\n                id={pelicula.id}\n                titulo={pelicula.title}\n                imagen={pelicula.poster_path}\n                descripcion={pelicula.overview}\n                tipo=\"movie\"\n              />\n            ))\n          ) : (\n            <p>No se encontraron películas que coincidan.</p>\n          )}\n        </section>\n        <button onClick={this.obtenerPeliculas} className=\"btn btn-info\">Cargar más</button>\n\n      </>\n    );\n  }\n}\n\nexport default Movies;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}