{"ast":null,"code":"var _jsxFileName = \"/Users/joaquinbecerra/Desktop/Proyecto Integrador Prog. III/proyectoreact/src/screens/Resultados/Resultados.js\";\nimport React, { Component } from 'react';\nimport CardPelicula from '../../components/CardPelicula/CardPelicula';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nclass Resultados extends Component {\n  constructor(props) {\n    super(props);\n    this.obtenerBusqueda = () => {\n      const apiKey = '7f7f8af8dc7e7a53c53410d1521c094f';\n      const queryParams = URLSearchParams(this.props.location.search);\n      const query = queryParams.get('search');\n      const tipo = queryParams.get('type');\n\n      // Si no se encuentra un query string 'type', por defecto buscamos películas\n      const tipoBusqueda = tipo === 'tv' ? 'tv' : 'movie';\n      const url = `https://api.themoviedb.org/3/search/${tipoBusqueda}?api_key=${apiKey}&query=${query}`;\n      this.setState({\n        cargando: true,\n        query: query,\n        tipoBusqueda: tipoBusqueda\n      });\n      fetch(url).then(res => res.json()).then(data => {\n        this.setState({\n          resultados: data.results,\n          cargando: false\n        });\n      }).catch(err => console.log('Error al buscar:', err));\n    };\n    this.state = {\n      resultados: [],\n      cargando: true,\n      query: '',\n      tipoBusqueda: ''\n    };\n  }\n  componentDidMount() {\n    this.obtenerBusqueda();\n  }\n  componentDidUpdate(prevProps) {\n    if (this.props.location.search !== prevProps.location.search) {\n      this.obtenerBusqueda();\n    }\n  }\n  render() {\n    const {\n      resultados,\n      cargando,\n      query,\n      tipoBusqueda\n    } = this.state;\n    if (cargando) {\n      return /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Cargando...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 14\n      }, this);\n    }\n    if (resultados.length === 0) {\n      return /*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-center my-5\",\n        children: [\"No se encontraron resultados para \\\"\", query, \"\\\".\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 14\n      }, this);\n    }\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"alert alert-info\",\n        children: [\"Resultados para: \\\"\", query, \"\\\"\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"row cards\",\n        children: resultados.map(item => /*#__PURE__*/_jsxDEV(CardPelicula, {\n          id: item.id,\n          titulo: tipoBusqueda === 'movie' ? item.title : item.name,\n          imagen: item.poster_path,\n          descripcion: item.overview,\n          tipo: tipoBusqueda\n        }, item.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  }\n}\nexport default Resultados;","map":{"version":3,"names":["React","Component","CardPelicula","jsxDEV","_jsxDEV","Fragment","_Fragment","Resultados","constructor","props","obtenerBusqueda","apiKey","queryParams","URLSearchParams","location","search","query","get","tipo","tipoBusqueda","url","setState","cargando","fetch","then","res","json","data","resultados","results","catch","err","console","log","state","componentDidMount","componentDidUpdate","prevProps","render","children","fileName","_jsxFileName","lineNumber","columnNumber","length","className","map","item","id","titulo","title","name","imagen","poster_path","descripcion","overview"],"sources":["/Users/joaquinbecerra/Desktop/Proyecto Integrador Prog. III/proyectoreact/src/screens/Resultados/Resultados.js"],"sourcesContent":["import React, { Component } from 'react';\nimport CardPelicula from '../../components/CardPelicula/CardPelicula';\n\nclass Resultados extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      resultados: [],\n      cargando: true,\n      query: '',\n      tipoBusqueda: '',\n    };\n  }\n\n  componentDidMount() {\n    this.obtenerBusqueda();\n  }\n  \n  componentDidUpdate(prevProps) {\n    if (this.props.location.search !== prevProps.location.search) {\n      this.obtenerBusqueda();\n    }\n  }\n\n  obtenerBusqueda = () => {\n    const apiKey = '7f7f8af8dc7e7a53c53410d1521c094f';\n    const queryParams = URLSearchParams(this.props.location.search);\n    const query = queryParams.get('search');\n    const tipo = queryParams.get('type');\n    \n    // Si no se encuentra un query string 'type', por defecto buscamos películas\n    const tipoBusqueda = tipo === 'tv' ? 'tv' : 'movie';\n    \n    const url = `https://api.themoviedb.org/3/search/${tipoBusqueda}?api_key=${apiKey}&query=${query}`;\n\n    this.setState({\n      cargando: true,\n      query: query,\n      tipoBusqueda: tipoBusqueda,\n    });\n    \n    fetch(url)\n      .then(res => res.json())\n      .then(data => {\n        this.setState({\n          resultados: data.results,\n          cargando: false,\n        });\n      })\n      .catch(err => console.log('Error al buscar:', err));\n  };\n\n  render() {\n    const { resultados, cargando, query, tipoBusqueda } = this.state;\n\n    if (cargando) {\n      return <h2>Cargando...</h2>;\n    }\n\n    if (resultados.length === 0) {\n      return <h2 className=\"text-center my-5\">No se encontraron resultados para \"{query}\".</h2>;\n    }\n\n    return (\n      <>\n        <h2 className=\"alert alert-info\">Resultados para: \"{query}\"</h2>\n        <section className=\"row cards\">\n          {resultados.map(item => (\n            <CardPelicula \n              key={item.id}\n              id={item.id}\n              titulo={tipoBusqueda === 'movie' ? item.title : item.name}\n              imagen={item.poster_path}\n              descripcion={item.overview}\n              tipo={tipoBusqueda}\n            />\n          ))}\n        </section>\n      </>\n    );\n  }\n}\n\nexport default Resultados;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}